{% load static %}
{% load imgproxy_tags %}

{# Only render if there's content or images #}
{% if config.content or config.image_1 or config.image_2 or config.image_3 or config.image_4 %}

{% if custom_style_css %}
<style>{{ custom_style_css|safe }}</style>
{% endif %}

<div class="banner-widget widget-type-{{ widget_type.css_class_name }} cms-content"{% if config.anchor %} id="{{ config.anchor }}"{% endif %}>
    {# Background image if provided #}
    {% if config.background_image %}
        <div class="banner-background" style="background-image: url('{% imgproxy config.background_image width=1920 height=600 resize_type='fill' %}');"></div>
    {% endif %}

    <div class="banner-body text-{{ config.text_position|default:'left' }} image-count-{{ config.image_count|default:1 }}">
        {% if config.image_count == 4 %}
            {# 4 images layout - no text, just images in a row #}
            <div class="banner-images layout-4">
                {% if config.image_1 %}
                    <img src="{% imgproxy config.image_1 width=400 height=400 resize_type='fill' %}" alt="" />
                {% endif %}
                {% if config.image_2 %}
                    <img src="{% imgproxy config.image_2 width=400 height=400 resize_type='fill' %}" alt="" />
                {% endif %}
                {% if config.image_3 %}
                    <img src="{% imgproxy config.image_3 width=400 height=400 resize_type='fill' %}" alt="" />
                {% endif %}
                {% if config.image_4 %}
                    <img src="{% imgproxy config.image_4 width=400 height=400 resize_type='fill' %}" alt="" />
                {% endif %}
            </div>
        {% else %}
            {# 1 or 2 images layout - with text #}
            <div class="banner-text">
                {{ config.content|safe }}
            </div>
            
            <div class="banner-images layout-{{ config.image_count|default:1 }}">
                {% if config.image_1 %}
                    {% if config.image_count == 1 %}
                        <img src="{% imgproxy config.image_1 width=600 height=600 resize_type='fill' %}" alt="" />
                    {% else %}
                        <img src="{% imgproxy config.image_1 width=400 height=600 resize_type='fill' %}" alt="" />
                    {% endif %}
                {% endif %}
                {% if config.image_2 and config.image_count >= 2 %}
                    <img src="{% imgproxy config.image_2 width=400 height=600 resize_type='fill' %}" alt="" />
                {% endif %}
            </div>
        {% endif %}
    </div>
</div>

{% endif %}{# End check for empty banner #}

