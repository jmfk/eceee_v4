{% load static %}
{% load imgproxy_tags %}

{# Only render if there's content - check both header and text content #}
{% if config.header_content or config.text_content %}

{% if custom_style_css %}
<style>{{ custom_style_css|safe }}</style>
{% endif %}

<div class="banner-widget widget-type-{{ widget_type.css_class_name }} cms-content{% if not config.show_border %} border-disabled{% endif %}"{% if config.anchor %} id="{{ config.anchor }}"{% endif %}>
    {# Background image if provided - full width #}
    {% if config.background_image %}
        <div class="banner-background" style="background-image: url('{% imgproxy config.background_image width=1920 height=600 resize_type='fill' %}');"></div>
    {% endif %}

    <div class="banner-body mode-{{ config.banner_mode|default:'text' }} image-size-{{ config.image_size|default:'square' }}">
        <div class="banner-text">
            {% if config.banner_mode == 'header' %}
                {{ config.header_content|safe }}
            {% else %}
                {{ config.text_content|safe }}
            {% endif %}
        </div>
        
        {% if config.banner_mode == 'text' and config.image_1 %}
        <div class="banner-images">
            {% if config.image_size == 'rectangle' %}
                {# Rectangle image - 280x140 (2:1 ratio), 2x: 560x280 #}
                <img 
                    class="banner-image"
                    src="{% imgproxy config.image_1 width=280 height=140 resize_type='fill' %}"
                    srcset="{% imgproxy config.image_1 width=280 height=140 resize_type='fill' %} 1x, {% imgproxy config.image_1 width=560 height=280 resize_type='fill' %} 2x"
                    alt="" />
            {% else %}
                {# Square image - 140x140, 2x: 280x280 #}
                <img 
                    class="banner-image"
                    src="{% imgproxy config.image_1 width=140 height=140 resize_type='fill' %}"
                    srcset="{% imgproxy config.image_1 width=140 height=140 resize_type='fill' %} 1x, {% imgproxy config.image_1 width=280 height=280 resize_type='fill' %} 2x"
                    alt="" />
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>

{% endif %}{# End check for empty banner #}
