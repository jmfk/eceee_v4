{% load static %}
{% load imgproxy_tags %}

{% if custom_style_css %}
<style>{{ custom_style_css|safe }}</style>
{% endif %}

<div class="content-card-widget widget-type-{{ widget_type.css_class_name }} cms-content"{% if config.anchor %} id="{{ config.anchor }}"{% endif %}>
    {% if config.header %}
    <div class="content-card-header">
        {{ config.header|linebreaksbr }}
    </div>
    {% endif %}
    
    <div class="content-card-body text-{{ config.text_position|default:'left' }} image-count-{{ config.image_count|default:1 }}">
        {% if config.image_count == 4 %}
            {# 4 images layout - no text, just images in a row #}
            <div class="content-card-images layout-4">
                {% if config.image_1 %}
                    <img src="{% imgproxy_url config.image_1 width=400 height=400 resize_type='fill' %}" alt="" />
                {% endif %}
                {% if config.image_2 %}
                    <img src="{% imgproxy_url config.image_2 width=400 height=400 resize_type='fill' %}" alt="" />
                {% endif %}
                {% if config.image_3 %}
                    <img src="{% imgproxy_url config.image_3 width=400 height=400 resize_type='fill' %}" alt="" />
                {% endif %}
                {% if config.image_4 %}
                    <img src="{% imgproxy_url config.image_4 width=400 height=400 resize_type='fill' %}" alt="" />
                {% endif %}
            </div>
        {% else %}
            {# 1 or 2 images layout - with text #}
            <div class="content-card-text">
                {{ config.content|safe }}
            </div>
            
            <div class="content-card-images layout-{{ config.image_count|default:1 }}">
                {% if config.image_1 %}
                    {% if config.image_count == 1 %}
                        <img src="{% imgproxy_url config.image_1 width=600 height=600 resize_type='fill' %}" alt="" />
                    {% else %}
                        <img src="{% imgproxy_url config.image_1 width=400 height=600 resize_type='fill' %}" alt="" />
                    {% endif %}
                {% endif %}
                {% if config.image_2 and config.image_count >= 2 %}
                    <img src="{% imgproxy_url config.image_2 width=400 height=600 resize_type='fill' %}" alt="" />
                {% endif %}
            </div>
        {% endif %}
    </div>
</div>

