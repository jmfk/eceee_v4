{% load static %}
{% load imgproxy_tags %}

{# Only render if there's content, header, or image #}
{% if config.header or config.content or config.image_1 %}

{% if custom_style_css %}
<style>{{ custom_style_css|safe }}</style>
{% endif %}

<div class="content-card-widget widget-type-{{ widget_type.css_class_name }} cms-content{% if not config.show_border %} border-disabled{% endif %}"{% if config.anchor %} id="{{ config.anchor }}"{% endif %}>
    {% if config.header %}
    <div class="content-card-header">
        {{ config.header|linebreaksbr }}
    </div>
    {% endif %}
    <div class="content-card-body image-size-{{ config.image_size|default:'square' }}">
        <div class="content-card-text">
            {{ config.content|safe }}
        </div>
        
        {% if config.image_1 %}
        <div class="content-card-images">
            {% if config.image_size == 'rectangle' %}
                {# Rectangle image - 280x140 (2:1 ratio), 2x: 560x280 #}
                <img 
                    class="content-card-image"
                    src="{% imgproxy config.image_1 width=280 height=140 resize_type='fill' %}"
                    srcset="{% imgproxy config.image_1 width=280 height=140 resize_type='fill' %} 1x, {% imgproxy config.image_1 width=560 height=280 resize_type='fill' %} 2x"
                    alt="" />
            {% else %}
                {# Square image - 140x140, 2x: 280x280 #}
                <img 
                    class="content-card-image"
                    src="{% imgproxy config.image_1 width=140 height=140 resize_type='fill' %}"
                    srcset="{% imgproxy config.image_1 width=140 height=140 resize_type='fill' %} 1x, {% imgproxy config.image_1 width=280 height=280 resize_type='fill' %} 2x"
                    alt="" />
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>

{% endif %}{# End check for empty content card #}
