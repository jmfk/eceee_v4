{% load static %}

<aside class="sidebar-top-news-widget" data-widget-type="sidebar-top-news">
    {% if config.widget_title %}
        <h3 class="widget-title">{{ config.widget_title }}</h3>
    {% endif %}

    {% if error %}
        <div class="error-message">
            {{ error }}
        </div>
    {% elif news_items %}
        <ul class="news-list">
            {% for item in news_items %}
                <li class="news-item{% if item.is_pinned %} pinned{% endif %}" data-object-id="{{ item.id }}">
                    {% if config.show_thumbnails and item.thumbnail_url %}
                        <div class="news-thumbnail">
                            <img src="{{ item.thumbnail_url }}" alt="{{ item.title }}" loading="lazy">
                        </div>
                    {% endif %}

                    <div class="news-content">
                        <div class="news-meta">
                            {% if config.show_object_type %}
                                <span class="news-type-badge">{{ item.object_type.label }}</span>
                            {% endif %}
                            {% if config.show_dates and item.publish_date %}
                                <time class="news-date" datetime="{{ item.publish_date|date:'c' }}">
                                    {{ item.publish_date|date:"M j, Y" }}
                                </time>
                            {% endif %}
                        </div>

                        <h4 class="news-title">
                            <a href="/{{ item.object_type.name }}/{{ item.slug }}/">{{ item.title }}</a>
                        </h4>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <div class="no-news-message">
            <p>No news articles available.</p>
        </div>
    {% endif %}
</aside>

