{% load static %}
{% load security_filters %}

<article class="news-widget widget-news" data-widget-type="news">
    {% if config.title %}
        <header class="news-header">
            <h2 class="news-title">{{ config.title }}</h2>
            {% if config.show_meta and config.category %}
                <span class="news-category news-category-{{ config.category }}">{{ config.category|title }}</span>
            {% endif %}
        </header>
    {% endif %}

    {% if config.featured_image %}
        <div class="news-featured-image">
            <img src="{{ config.featured_image }}" alt="{{ config.title|default:'News article' }}" loading="lazy">
        </div>
    {% endif %}

    <div class="news-content">
        {% if config.summary %}
            <div class="news-summary">
                {{ config.summary|linebreaks }}
            </div>
        {% endif %}

        <div class="news-body">
            {{ config.content|sanitize_html }}
        </div>
    </div>

    {% if config.show_meta %}
        <footer class="news-meta">
            {% if config.author %}
                <span class="news-author">
                    <i class="icon-user" aria-hidden="true"></i>
                    By {{ config.author }}
                </span>
            {% endif %}
            {% if config.publication_date %}
                <time class="news-date" datetime="{{ config.publication_date }}">
                    <i class="icon-calendar" aria-hidden="true"></i>
                    {{ config.publication_date|date:"F j, Y" }}
                </time>
            {% endif %}
        </footer>
    {% endif %}
</article>

<style>
.news-widget {
    border: 1px solid #e1e5e9;
    border-radius: 8px;
    padding: 1.5rem;
    margin: 1rem 0;
    background: #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.news-header {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #e1e5e9;
}

.news-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: #1a202c;
    margin: 0 0 0.5rem 0;
    line-height: 1.2;
}

.news-category {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.news-category-general { background: #e2e8f0; color: #4a5568; }
.news-category-business { background: #fed7d7; color: #c53030; }
.news-category-technology { background: #bee3f8; color: #2b6cb0; }
.news-category-sports { background: #c6f6d5; color: #276749; }
.news-category-health { background: #fbb6ce; color: #b83280; }
.news-category-politics { background: #faf089; color: #744210; }

.news-featured-image {
    margin: 1rem 0;
    border-radius: 6px;
    overflow: hidden;
}

.news-featured-image img {
    width: 100%;
    height: auto;
    display: block;
}

.news-summary {
    font-size: 1.125rem;
    color: #4a5568;
    margin-bottom: 1.5rem;
    font-style: italic;
    border-left: 4px solid #4299e1;
    padding-left: 1rem;
}

.news-body {
    color: #2d3748;
    line-height: 1.6;
}

.news-meta {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid #e1e5e9;
    display: flex;
    gap: 1rem;
    font-size: 0.875rem;
    color: #718096;
    flex-wrap: wrap;
}

.news-author, .news-date {
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.icon-user::before { content: "ðŸ‘¤"; }
.icon-calendar::before { content: "ðŸ“…"; }

@media (max-width: 768px) {
    .news-widget {
        padding: 1rem;
    }
    
    .news-title {
        font-size: 1.5rem;
    }
    
    .news-meta {
        flex-direction: column;
        gap: 0.5rem;
    }
}
</style> 